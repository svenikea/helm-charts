{{ if .Values.configMaps.enabled }}
{{ if .Values.configMaps.keyBase.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Values.configMaps.keyBase.configName }}
data: {{ toYaml .Values.configMaps.keyBase.content | nindent 2 }}
---
{{ end }}

{{ if .Values.configMaps.extraConfigFile.enabled }}
{{ range .Values.configMaps.extraConfigFile.files }}
apiVersion: v1
kind: ConfigMap
metadata:
 name: {{ .name }}
data:
  {{ .subPath }}: |
    {{ .data | nindent 4 }}
---
{{ end }}
{{ end }}
{{ end }}
---
{{ if .Values.promtail.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: promtail-config
data:
  promtail-config.yaml: |
    {{ .Values.promtail.config | nindent 4 }}
{{ end }}
